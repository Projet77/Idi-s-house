<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion Admin - Idi's House</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/login.css?v=3">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>

<body>

    <!-- Main Header -->
    <header>
        <div class="container header-content">
            <a href="index.html" class="logo">Idi's House</a>

            <div class="search-wrapper">
                <form class="search-form">
                    <input type="text" class="search-input" placeholder="Je cherche...">
                    <button type="submit" class="search-btn"><i class="ri-search-line"></i></button>
                </form>
            </div>

            <div class="nav-actions">
                <a href="login.html" class="nav-item active">
                    <span class="icon-large"><i class="ri-user-line"></i></span>
                    <span>Compte</span>
                </a>
                <a href="#" class="nav-item">
                    <span class="icon-large"><i class="ri-heart-line"></i></span>
                    <span>Favoris</span>
                </a>
                <a href="cart.html" class="nav-item">
                    <span class="icon-large" style="position: relative;"><i class="ri-shopping-cart-line"></i> <span
                            class="cart-badge">0</span></span>
                    <span>Panier</span>
                </a>
            </div>
        </div>
    </header>

    <div class="auth-wrapper">
        <div class="auth-container glass">
            <!-- Left Side: Image -->
            <div class="auth-image"
                style="background-image: url('https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?q=80&w=1000&auto=format&fit=crop');">
                <div class="auth-overlay">
                    <h3>Bienvenue chez Idi's Admin</h3>
                    <p>Gérez votre boutique en toute simplicité.</p>
                </div>
            </div>

            <!-- Right Side: Form -->
            <div class="auth-form-side">
                <div class="logo-small">
                    <h2>Connexion</h2>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="email" required placeholder="nom@exemple.com">
                    </div>
                    <div class="form-group">
                        <label>Mot de passe</label>
                        <input type="password" id="password" required placeholder="********">
                    </div>
                    <button type="submit" class="btn-login">Se connecter</button>
                </form>
                <p id="errorMessage" class="error-message"></p>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col brand-col">
                    <a href="index.html" class="logo" style="margin-bottom: 15px; display: block;">Idi's House</a>
                    <p style="color: #636e72; font-size: 13px; line-height: 1.6; margin-bottom: 20px;">
                        Votre destination pour le mobilier design et confort à Dakar. Qualité premium, prix accessibles.
                    </p>
                    <div class="social-links" style="display: flex; gap: 15px;">
                        <a href="#"><i class="ri-facebook-fill" style="font-size: 1.2rem;"></i></a>
                        <a href="#"><i class="ri-instagram-line" style="font-size: 1.2rem;"></i></a>
                        <a href="#"><i class="ri-twitter-x-line" style="font-size: 1.2rem;"></i></a>
                    </div>
                </div>

                <div class="footer-col">
                    <h4>Navigation</h4>
                    <ul>
                        <li><a href="index.html">Accueil</a></li>
                        <li><a href="shop.html">Boutique</a></li>
                        <li><a href="cart.html">Panier</a></li>
                        <li><a href="about.html">À Propos</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>Aide & Infos</h4>
                    <ul>
                        <li><a href="https://wa.me/221764297495" target="_blank"><i class="ri-whatsapp-line"></i>
                                Service Client</a></li>
                        <li><a href="#">Conditions Générales</a></li>
                        <li><a href="#">Politique de Confidentialité</a></li>
                        <li><a href="#">Mentions Légales</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                &copy; 2026 Idi's House - Fait avec <i class="ri-heart-fill" style="color: #ff7675;"></i> à Dakar.
            </div>
        </div>
    </footer>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const errorMsg = document.getElementById('errorMessage');

            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (data.status === 'success') {
                    // Save token in Cookie (1 day validity)
                    const d = new Date();
                    d.setTime(d.getTime() + (24 * 60 * 60 * 1000));
                    let expires = "expires=" + d.toUTCString();
                    document.cookie = "auth_token=" + data.token + ";" + expires + ";path=/";

                    window.location.href = 'admin.html';
                } else {
                    errorMsg.textContent = data.message || 'Identifiants incorrects';
                }
            } catch (error) {
                console.error('Login error:', error);
                errorMsg.textContent = 'Erreur de connexion au serveur';
            }
        });
    </script>
</body>

</html>